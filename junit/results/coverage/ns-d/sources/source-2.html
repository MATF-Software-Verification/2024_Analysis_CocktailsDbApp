


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>app Coverage Report > SearchFragment</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope: app<span class="separator">|</span>    <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.example.cocktailsdbapp.ui.search</a>
</div>

<h1>Coverage Summary for Class: SearchFragment (com.example.cocktailsdbapp.ui.search)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
<th class="coverageStat 
">
  Instruction, %
</th>
</tr>
<tr>
  <td class="name">SearchFragment</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/12)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/32)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/51)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/336)
  </span>
</td>
</tr>
  <tr>
    <td class="name">SearchFragment$sam$androidx_lifecycle_Observer$0</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">SearchFragment$setObservers$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/33)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SearchFragment$setupToolbar$1$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
    <td class="coverageStat"/>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/12)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SearchFragment$special$$inlined$viewModels$default$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">SearchFragment$special$$inlined$viewModels$default$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">SearchFragment$special$$inlined$viewModels$default$3</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">SearchFragment$special$$inlined$viewModels$default$4</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
  </tr>
  <tr>
    <td class="name">SearchFragment$special$$inlined$viewModels$default$5</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
    <td class="coverageStat"/>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/21)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/38)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/61)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/381)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.example.cocktailsdbapp.ui.search
&nbsp;
&nbsp;import android.app.Activity
&nbsp;import android.content.Intent
&nbsp;import android.os.Bundle
&nbsp;import android.speech.RecognizerIntent
&nbsp;import android.view.View
&nbsp;import android.widget.Toast
&nbsp;import androidx.appcompat.widget.SearchView
&nbsp;import androidx.core.os.bundleOf
&nbsp;import androidx.fragment.app.viewModels
&nbsp;import androidx.navigation.fragment.findNavController
&nbsp;import com.example.cocktailsdbapp.R
&nbsp;import com.example.cocktailsdbapp.databinding.FragmentSearchBinding
&nbsp;import com.example.cocktailsdbapp.model.Cocktail
&nbsp;import com.example.cocktailsdbapp.ui.BaseFragment
&nbsp;import com.example.cocktailsdbapp.ui.cocktails.CocktailAdapter
&nbsp;import dagger.hilt.android.AndroidEntryPoint
&nbsp;
&nbsp;@AndroidEntryPoint
<b class="nc">&nbsp;class SearchFragment: BaseFragment&lt;FragmentSearchBinding&gt;(FragmentSearchBinding::inflate), CocktailAdapter.OnFavoriteClickListener, CocktailAdapter.OnItemClickListener {</b>
&nbsp;
<b class="nc">&nbsp;    private val searchViewModel: SearchViewModel by viewModels()</b>
&nbsp;
&nbsp;    private var cocktailAdapter: CocktailAdapter? = null
&nbsp;
&nbsp;    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
<b class="nc">&nbsp;        super.onViewCreated(view, savedInstanceState)</b>
<b class="nc">&nbsp;        setObservers()</b>
&nbsp;    }
&nbsp;
&nbsp;    override fun onStart() {
<b class="nc">&nbsp;        super.onStart()</b>
<b class="nc">&nbsp;        setupToolbar()</b>
&nbsp;    }
&nbsp;
&nbsp;    private fun setObservers() {
<b class="nc">&nbsp;        searchViewModel.searchResultsData.observe(viewLifecycleOwner) { cocktails -&gt;</b>
<b class="nc">&nbsp;            if (cocktails.isNullOrEmpty()) {</b>
&nbsp;                // Show empty view
<b class="nc">&nbsp;                toggleEmptyViewVisibility(true)</b>
&nbsp;            } else {
&nbsp;                // Show RecyclerView and update data
<b class="nc">&nbsp;                toggleEmptyViewVisibility(false)</b>
<b class="nc">&nbsp;                setCocktailsAdapter(cocktails)</b>
<b class="nc">&nbsp;                cocktailAdapter?.updateData(cocktails)</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private fun setCocktailsAdapter(cocktails: List&lt;Cocktail&gt;?) {
<b class="nc">&nbsp;        cocktailAdapter = CocktailAdapter(this, this)</b>
<b class="nc">&nbsp;        cocktailAdapter?.let { adapter -&gt;</b>
<b class="nc">&nbsp;            cocktails?.let { items -&gt; adapter.updateData(items) }</b>
<b class="nc">&nbsp;            binding.rvCocktails.adapter = adapter</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        binding.llLabel.visibility = View.VISIBLE</b>
&nbsp;    }
&nbsp;
&nbsp;    private fun toggleEmptyViewVisibility(showEmptyView: Boolean) {
<b class="nc">&nbsp;        if (showEmptyView) {</b>
<b class="nc">&nbsp;            binding.rvCocktails.visibility = View.GONE</b>
<b class="nc">&nbsp;            binding.tvEmptyView.visibility = View.VISIBLE</b>
<b class="nc">&nbsp;            binding.llLabel.visibility = View.GONE</b>
&nbsp;        } else {
<b class="nc">&nbsp;            binding.rvCocktails.visibility = View.VISIBLE</b>
<b class="nc">&nbsp;            binding.tvEmptyView.visibility = View.GONE</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private fun setupToolbar() {
<b class="nc">&nbsp;        communicator.apply {</b>
<b class="nc">&nbsp;            showSearchIconView(false)</b>
<b class="nc">&nbsp;            showSearchInputView(true)</b>
<b class="nc">&nbsp;            showFilterView(false)</b>
<b class="nc">&nbsp;            val searchView = getSearchInputViewReference()</b>
<b class="nc">&nbsp;            searchView?.onActionViewExpanded()</b>
&nbsp;            // Access the SearchView from the MainActivity
<b class="nc">&nbsp;            searchView?.setOnQueryTextListener(object : SearchView.OnQueryTextListener {</b>
&nbsp;                override fun onQueryTextSubmit(query: String?): Boolean {
&nbsp;                    // Handle query submission if needed
<b class="nc">&nbsp;                    handleQueryChange(query)</b>
<b class="nc">&nbsp;                    return true</b>
&nbsp;                }
&nbsp;
&nbsp;                override fun onQueryTextChange(newText: String?): Boolean {
&nbsp;                    // Update the search query in the ViewModel or perform search directly
<b class="nc">&nbsp;                    handleQueryChange(newText)</b>
<b class="nc">&nbsp;                    return true</b>
&nbsp;                }
&nbsp;            })
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    private fun handleQueryChange(newText: String?) {
<b class="nc">&nbsp;        searchViewModel.setSearchQuery(newText.orEmpty())</b>
<b class="nc">&nbsp;        communicator.getCurrentLoggedInUser()?.let { searchViewModel.fetchSearchData(it) }</b>
<b class="nc">&nbsp;        binding.tvQueryParam.text = getString(R.string.search_param, newText.orEmpty())</b>
&nbsp;    }
&nbsp;
&nbsp;    override fun openCocktailDetails(cocktailId: String) {
<b class="nc">&nbsp;        val args = bundleOf(getString(R.string.argument_cocktail_id) to cocktailId)</b>
<b class="nc">&nbsp;        findNavController().navigate(R.id.action_searchFragment_to_CocktailDetailsFragment, args)</b>
&nbsp;    }
&nbsp;
&nbsp;    override fun favoriteCocktail(cocktail: Cocktail) {
<b class="nc">&nbsp;        communicator.getCurrentLoggedInUser()?.let {</b>
<b class="nc">&nbsp;            searchViewModel.favoriteCocktail(</b>
<b class="nc">&nbsp;                it,</b>
<b class="nc">&nbsp;                cocktail</b>
&nbsp;            )
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    private val requestCodeSpeechInput = 100</b>
&nbsp;
&nbsp;    fun startVoiceInput() {
<b class="nc">&nbsp;        val intent = Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH)</b>
<b class="nc">&nbsp;        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM)</b>
<b class="nc">&nbsp;        intent.putExtra(RecognizerIntent.EXTRA_PROMPT, getString(R.string.search_speak_to_search))</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            startActivityForResult(intent, requestCodeSpeechInput)</b>
&nbsp;        } catch (e: Exception) {
<b class="nc">&nbsp;            Toast.makeText(this.requireContext(), getString(R.string.search_speech_to_text_not_supported), Toast.LENGTH_SHORT).show()</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Deprecated(&quot;Deprecated in Java&quot;)
&nbsp;    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
<b class="nc">&nbsp;        super.onActivityResult(requestCode, resultCode, data)</b>
&nbsp;
<b class="nc">&nbsp;        when (requestCode) {</b>
<b class="nc">&nbsp;            requestCodeSpeechInput -&gt; {</b>
<b class="nc">&nbsp;                if (resultCode == Activity.RESULT_OK &amp;&amp; data != null) {</b>
<b class="nc">&nbsp;                    val spokenText = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS)?.get(0)</b>
&nbsp;
&nbsp;                    // Do something with the spokenText, like setting it to an EditText
<b class="nc">&nbsp;                    communicator.getSearchInputViewReference()?.setQuery(spokenText, false)</b>
<b class="nc">&nbsp;                    binding.tvQueryParam.text = getString(R.string.search_param, spokenText.orEmpty())</b>
<b class="nc">&nbsp;                    searchViewModel.setSearchQuery(spokenText.orEmpty())</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-10-22 13:21</div>
</div>
</body>
</html>
